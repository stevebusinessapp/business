{% if selected_template %}
<div class="waybill-preview" style="
    border: 2px solid {{ selected_template.primary_color }};
    border-radius: 12px;
    padding: 24px;
    background: white;
    font-family: 'Roboto', sans-serif;
    color: {{ selected_template.text_color|default:'#333333' }};
    min-height: 400px;
">
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid {{ selected_template.primary_color }}; padding-bottom: 20px;">
        {% if company_logo and selected_template.show_company_logo %}
        <img src="{{ company_logo }}" alt="Company Logo" style="max-height: 60px; margin-bottom: 15px;">
        {% endif %}
        
        <h2 style="color: {{ selected_template.primary_color }}; margin: 0; font-size: 28px; font-weight: 700;">
            {{ selected_template.document_title|default:'WAYBILL' }}
        </h2>
        
        <div style="background: {{ selected_template.secondary_color }}; padding: 8px 16px; margin-top: 10px; display: inline-block; border-radius: 20px;">
            <strong>WB-PREVIEW</strong>
        </div>
    </div>
    
    <!-- Company Details -->
    {% if company_profile and selected_template.show_company_details %}
    <div style="margin-bottom: 25px; background: {{ selected_template.secondary_color }}; padding: 16px; border-radius: 8px;">
        <h4 style="color: {{ selected_template.primary_color }}; margin: 0 0 10px 0; font-size: 18px;">
            {{ company_profile.company_name|default:'Your Company Name' }}
        </h4>
        <div style="font-size: 14px; line-height: 1.6;">
            {% if company_profile.address %}<div>{{ company_profile.address }}</div>{% endif %}
            {% if company_profile.phone %}<div>Phone: {{ company_profile.phone }}</div>{% endif %}
            {% if company_profile.email %}<div>Email: {{ company_profile.email }}</div>{% endif %}
            {% if company_profile.website %}<div>Website: {{ company_profile.website }}</div>{% endif %}
        </div>
    </div>
    {% endif %}
    
    <!-- Sample Content Grid -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
        <!-- Sender Info -->
        <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid {{ selected_template.primary_color }};">
            <h5 style="color: {{ selected_template.primary_color }}; margin: 0 0 12px 0; font-size: 16px;">From (Sender)</h5>
            <div style="font-size: 14px; color: #666;">
                <div><strong>Sample Sender Name</strong></div>
                <div>+1 (555) 123-4567</div>
                <div>123 Sender Street, City, State</div>
            </div>
        </div>
        
        <!-- Receiver Info -->
        <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; border-left: 4px solid {{ selected_template.primary_color }};">
            <h5 style="color: {{ selected_template.primary_color }}; margin: 0 0 12px 0; font-size: 16px;">To (Receiver)</h5>
            <div style="font-size: 14px; color: #666;">
                <div><strong>Sample Receiver Name</strong></div>
                <div>+1 (555) 987-6543</div>
                <div>456 Receiver Ave, City, State</div>
            </div>
        </div>
    </div>
    
    <!-- Shipment Details -->
    <div style="background: {{ selected_template.secondary_color }}; padding: 16px; border-radius: 8px; margin-bottom: 25px;">
        <h5 style="color: {{ selected_template.primary_color }}; margin: 0 0 12px 0; font-size: 16px;">Shipment Details</h5>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 14px;">
            <div><strong>Destination:</strong> Sample City</div>
            <div><strong>Vehicle:</strong> ABC-1234</div>
            <div><strong>Driver:</strong> John Doe</div>
            <div><strong>Date:</strong> {{ "now"|date:"M d, Y" }}</div>
        </div>
    </div>
    
    <!-- Sample Items Table -->
    <div style="margin-bottom: 25px;">
        <h5 style="color: {{ selected_template.primary_color }}; margin: 0 0 12px 0; font-size: 16px;">Items</h5>
        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
            <thead>
                <tr style="background: {{ selected_template.primary_color }}; color: white;">
                    <th style="padding: 12px 8px; text-align: left; border: 1px solid #ddd;">Product/Service</th>
                    <th style="padding: 12px 8px; text-align: left; border: 1px solid #ddd;">Description</th>
                    <th style="padding: 12px 8px; text-align: center; border: 1px solid #ddd;">Qty</th>
                    <th style="padding: 12px 8px; text-align: center; border: 1px solid #ddd;">Weight</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px 8px; border: 1px solid #ddd;">Electronics</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd;">Sample electronic devices</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center;">5</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center;">2.5 kg</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 10px 8px; border: 1px solid #ddd;">Documents</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd;">Important business documents</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center;">1</td>
                    <td style="padding: 10px 8px; border: 1px solid #ddd; text-align: center;">0.2 kg</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Bank Details -->
    {% if default_bank_account and selected_template.show_bank_details %}
    <div style="background: #e8f5e8; padding: 16px; border-radius: 8px; border-left: 4px solid #28a745; margin-bottom: 20px;">
        <h5 style="color: #28a745; margin: 0 0 12px 0; font-size: 16px;">Bank Account Details</h5>
        <div style="font-size: 14px; line-height: 1.6;">
            <div><strong>Bank:</strong> {{ default_bank_account.bank_name }}</div>
            <div><strong>Account Name:</strong> {{ default_bank_account.account_name }}</div>
            <div><strong>Account Number:</strong> {{ default_bank_account.account_number }}</div>
        </div>
    </div>
    {% endif %}
    
    <!-- Footer -->
    <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid {{ selected_template.primary_color }}; text-align: center; font-size: 12px; color: #666;">
        <div>This is a live preview of your waybill template</div>
        <div style="margin-top: 8px; color: {{ selected_template.primary_color }};">
            <strong>Generated by Multi-Purpose Business App</strong> | Developed by <a href="https://nazarng.com/steve.html" target="_blank" style="color: {{ selected_template.primary_color }}; text-decoration: none;">Steve Ubangha</a>
        </div>
    </div>
</div>

{% else %}
<!-- Fallback Preview -->
<div style="
    border: 2px solid #e91e63;
    border-radius: 12px;
    padding: 24px;
    background: white;
    text-align: center;
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
">
    <div>
        <h3 style="color: #e91e63; margin-bottom: 16px;">Select a Template</h3>
        <p>Choose a template from the options above to see a preview of your waybill.</p>
    </div>
</div>
{% endif %}
